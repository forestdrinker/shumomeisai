1. 问题定义与定性（Problem Definition & Qualitative）
1.1 核心数学本质是什么？
这题不是“单一预测题”，而是一条 逆问题→机制回放→归因解释→制度设计 的完整链条：
- Task 1（核心地基）：从“评委分 + 淘汰结果”去反推“观众投票”——典型 隐变量反演/逆问题，而且是“弱监督/半黑箱”场景：你只看到输入与结果，中间关键变量（票）缺失。
- Task 2（规则对比）：拿到票的估计后，在 Rank vs Percent 两套规则下“重跑历史”做反事实比较（Counterfactual Simulation）。题面明确指出两种规则、并且第 28 季前后存在“Bottom-two + Judges’ Save”分段机制。
- Task 3（归因）：分离“明星自带流量/特征”与“职业舞者带飞能力”，属于 层次结构数据的归因建模（重复测量/跨季复用）。
- Task 4（制度设计）：面向节目方的 多目标优化/机制设计：公平、观众参与、戏剧性（不可预测性）等往往互相冲突，需要给出权衡与鲁棒性论证。
题目背景里明确：赛制经历 Rank→Percent→（约第 28 季起）Rank + Judges’ Save 的变化，并说明“具体哪季切回 Rank 不确定，但合理假设是第 28 季”。这会直接影响你在 Task1/2 的建模假设。

---
1.2 隐藏难点在哪里？（评委最爱扣分的坑）
1. 可识别性（Identifiability）差：只要淘汰顺序一致，就可能存在大量不同的票分配都“解释得通”。问题分析里已经点明：每周淘汰本质是一组不等式约束，形成高维可行域（多面体），解天然多。
2. 赛季结构不齐整 + 数据截断：
  - 不同赛季选手数、周数不同；
  - N/A 出现在“没有第 4 位评委”或“该季没有那一周”；
  - 淘汰后记 0 分（这不是“真实得分 0”，而是右截断/缺失掩码）。
3. 规则逻辑非连续：Judges’ Save 是“先算 bottom-two（连续/加权），再评委二选一（离散截断）”的分段决策。
4. 信息粒度限制：JudgeY 是“评分顺序”，并不保证同一人跨周/跨季一致，所以“评委个人偏好”很难作为稳定特征建模。
5. O 奖竞争态势：建模建议强调 C 题门槛低、卷可视化与特征工程；普通线性回归/熵权法会同质化（只能当 baseline）。

---
2. 模型选型（CS 战队特供版）
目标：批判性“去粗取精”后形成一个 可落地、可解释、可出彩 的组合拳。我们保留方案2的“概率/不确定性优势”，吸收方案1的“算法与图论炫技点”，并按建模建议把“特征工程+可视化+敏感性”拉满。
（题目也明确要求你给 consistency 与 certainty 的量化）

---
2.1 主模型（Primary Model）
Task 1（反推票数）：**“约束感知的概率反演” + “多解采样” 的混合框架
核心思想：把未知票数当作每位选手的 每周票份额（share），用淘汰结果提供弱监督约束，再用“跨周平滑/最大熵”解决多解，并输出不确定性。
- 概率主线（来自方案2 + 问题分析）：贝叶斯推断/MCMC 能直接产出分布与可信区间，契合题目“certainty”要求。
- 约束主线（来自问题分析）：淘汰相当于不等式约束，适合用 CSP/LP/可行域观点做结构化限制。
- CS 增强（吸收方案1但不盲从）：
  - 方案1建议用 GA/差分进化做“全局搜索”并多次运行得到不确定性。我们不把 GA 当唯一主模型（理由：可解释性弱、收敛与可复现性风险大），而是把它定位为 可行域采样器/鲁棒性对照：用于验证“后验分布/置信区间是否合理”，以及在 Judges’ Save 等非连续逻辑下补充 MCMC 的困难点。
  - ABM（多智能体）虽然酷，但缺乏可校准数据，容易变成“拍脑袋故事”。我们只把它放到 压力测试（stress test）：用来模拟“粉丝结构变化”对规则敏感性的方向性结论，而不是用它生成主票数。方案1提 ABM 用于比较规则敏感度——这个用途合理，但不应喧宾夺主。
最小数学骨架（不展开推导，仅定调）：
- 票份额：(v{i,t}\ge 0,\ \sum_i v{i,t}=1)
- 已知评委总分：(s_{i,t})（需做周内归一/排名）
- 规则映射：(c{i,t}=g(s{i,t},v{i,t};\text{rank/percent + save}))，淘汰事件约束 (E_t=\arg\min_i c{i,t})
Task 2（规则对比）：不确定性传播的赛季回放引擎
- 方案2给出的“写仿真器重跑历史 + 用 Spearman/颠覆率等指标”是正确方向。
- 我们的升级点：不是用票的点估计，而是用 Task1 的票分布做“多次回放”，输出“冠军改变概率/争议人物翻盘概率”，把不确定性贯穿到底。
Task 3（归因）：双目标机器学习 + 可解释性（SHAP） + 图嵌入特征
- 方案1的二部图/HITS/Node2Vec 对“舞伴带飞”很有展示张力。
- 方案2/问题分析强调混合效应或双目标回归思想。
- 我们的融合：
  1. 建两个目标：预测 评委分 与预测 票份额（同一套特征，比较差异）；
  2. 特征不仅包含年龄/行业/赛季周次，还引入 舞伴图嵌入向量（Node2Vec）/中心性 作为高阶表征（CS 优势点）；
  3. 用 SHAP 做“观众票 vs 评委分”差异解释（论文呈现极强）。
Task 4（新赛制）：多目标优化 + 鲁棒性对抗（刷票）
- 问题分析提出“公平/参与/戏剧性”三目标与帕累托前沿，并建议动态权重、刷票鲁棒性测试。
- 我们把它工程化：在回放引擎上加一个“搜索器”，自动扫描权重/阈值/阶段性规则，输出 Pareto 前沿与推荐点。

---
2.2 对比/基线模型（Baseline Model）
基线必须“够简单但不弱智”，用于对照主模型优势（尤其是 certainty、鲁棒性与跨季泛化）。
- Baseline-A（Task1）：每周独立的 CSP/线性规划/最大熵 解（只保证复现淘汰，不建时间连续性），输出单点票份额；不确定性用“可行域体积近似/简单重采样”粗估。
- Baseline-B（Task2）：用 Baseline-A 的点估计票回放（不做不确定性传播）。
- Baseline-C（Task3）：混合效应模型（或等价的分层统计基线），给出舞伴随机效应作“带飞系数”。
- Baseline-D（Task4）：固定 50/50 线性加权 +（可选）固定 bottom-two save；不做多目标搜索。

---
2.3 核心创新点（你们融合方案比单独 A/B 强在哪）
1. “可行域→分布→回放”闭环：不只找一组能解释历史的票，而是构造“票的分布”，并把分布传播到规则对比与新赛制评估（这是 O 奖论文常见分水岭）。
2. CS 亮点是“可验证的炫技”：图论/嵌入/GA 都用，但定位清晰：
  - 图嵌入用于增强特征并可视化解释舞伴影响；
  - GA 用作复杂规则下的可行域采样与鲁棒性对照，而不是拍脑袋主模型。
3. 数据工程驱动的优势：强调“数据截断掩码 + 衍生特征”（趋势、波动、相对排名、提升速率等），符合建模建议的“特征工程决定胜负”。
4. 把 judges’ save 当“分段机制”严肃对待：显式建模其截断效应与敏感性。

---
3. 逻辑流（分步叙事：从原始数据到最终结论）
Step 1：数据工程（Data Engineering）
- 建立统一的 Season–Week–Contestant 面板：汇总当周评委总分/均分、周内标准化分数、周内排名；剔除淘汰后“0 分”作为 右截断掩码，并处理 N/A（缺评委/不存在的周）。
- 规则分段标注：S1–2 Rank；S3–27 Percent；S28–34 Rank + Judges’ Save（按题面“合理假设第 28 季”）。
- 特征工程：
  - 表现类：周内相对得分、滚动平均、提升斜率、波动率；
  - 节目进程类：周次、剩余人数、是否决赛周；
  - 关系类：明星–舞伴二部图特征（中心性/嵌入）。
Step 2：基线反演（Baseline Modeling）
- 用每周独立的 CSP/最大熵/LP 产生“能解释淘汰”的票份额单点解（快速、可控），并给出基础一致性指标（复现淘汰率）。这对应问题分析里“每周约束→可行域”的思路。
Step 3：高阶反演（Advanced Modeling）
- 引入跨周先验（“人气不会剧烈跳变”/平滑/最大熵）解决多解：问题分析明确指出可用“最平滑/一致性最大化”来处理多解性。
- 用贝叶斯/MCMC（或“GA 多次采样”作补充）生成票份额分布与可信区间，量化 certainty；这也与方案2强调的“直接输出置信区间”一致。
Step 4：验证、规则回放与敏感性（Validation & Sensitivity）
- 赛季回放引擎：在 Rank/Percent 两规则下分别回放每季（题面要求 apply both to each season）。
- Judges’ Save 情景：加入“bottom-two + 评委二选一”的分段机制，做对比与敏感性。
- 指标体系：
  - 一致性：淘汰复现率、关键周（决赛前）复现率；
  - 偏向性：最终名次与 fan-rank / judge-rank 的相关性对比（问题分析给了方向）；
  - 争议人物反事实：Jerry Rice / Bobby Bones 等在不同规则下的“翻盘概率/淘汰周变化”，并可做“贡献分解”（Shapley）作为解释加分点。
Step 5：归因 + 新赛制推荐（Attribution & System Design）
- 归因：双目标建模（评委分 vs 票份额），输出特征影响差异；舞伴效应用图嵌入/中心性增强，形成“可视化震撼证据”。
- 新赛制：在“公平/参与/戏剧性”三目标下搜索权重与阶段规则，输出 Pareto 前沿与鲁棒性（刷票）压力测试。

---
4. 优化亮点（O 奖得分点）
4.1 为什么这套方案更像 O 奖而不是“大众答案”
- 不是只给一个票数解，而是给“票的分布 + 不确定性传播”：题面要求 certainty，你们直接用后验/采样区间响应，而不是一句“我认为很可信”。
- 拒绝“空炫技”：
  - ABM 仅做压力测试，不主导结论（避免无数据校准导致的主观性）；
  - GA 作为复杂机制下的“可行域采样/鲁棒性验证”，而非替代理论与解释。
- 可视化与特征工程拉满：建模建议强调“特征工程决定胜负、图表要比别人强一个时代”——你们用网络图+SHAP+不确定性带状图，视觉上就能秒杀“Excel 风”。
4.2 图表/展示层面的“必杀清单”（给 Writer 的得分提示）
- 一张“规则时间线 + 争议事件”总览图（S2 Jerry Rice、S27 Bobby Bones、S28 Judges’ Save）
- 每季回放差异热力图（Rank vs Percent 在哪些周产生不同淘汰）
- 票份额的不确定性带（每位选手随周变化的区间带）
- 二部图网络（明星–舞伴）+ 关键舞伴中心性/嵌入可视化
- SHAP Summary：分别对“评委分模型/票模型”画两张，强调“同一特征对两者影响不同”的洞见（观众 vs 专业）
4.3 统一符号与叙事一句话（方便写作“模型建立的合理性”）
- 统一口径：
  - “评委分是技术信号、观众票是人气信号；赛制就是两信号的融合算法；我们做的是从结果反推融合中的隐藏输入，并比较不同融合算法。”
- 逻辑依据一句话（可直接写进论文）：
  - “由于观众票不可观测且存在多解，我们以淘汰结果形成的约束可行域为基础，引入跨周平滑与概率采样来获得既一致又可量化不确定性的票份额估计，并将不确定性传播到规则回放与新赛制评估中。”